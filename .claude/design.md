# 概要

- **名前**: annotation-viewer
- **概要**: 画像群とアノテーションファイルを読み取り、結果を重畳して表示するVS Code拡張機能
- **対象**: 機械学習・コンピュータビジョンの研究者、データサイエンティスト

# 機能

## 基本表示機能
- **グリッドビュー**: サムネイル一覧表示
- **フルスクリーンビュー**: 大画面での詳細表示（95%×90%サイズ）
- **高精度ズーム・パン**: マウスドラッグとホイールでの操作
- **キーボードナビゲーション**: 矢印キー、ESC、スペースキー対応

## スライドショー機能
- **自動再生**: 再生/一時停止ボタン
- **4段階速度調整**: 0.1s, 0.5s, 1s, 2s（デフォルト: 0.1s）
- **リピート機能**: 無限ループ再生（デフォルト: ON）
- **リアルタイム制御**: スライダーによる任意画像選択

## アノテーション表示機能
- **COCOフォーマット対応**: 標準的なアノテーション形式をサポート
- **バウンディングボックス描画**: 色分けされた枠線表示
- **カテゴリラベル表示**: オブジェクト名の表示
- **ズーム連動**: 画像ズームに完全同期したアノテーション表示
- **On/Off切替**: フルスクリーンでのリアルタイム切り替え
- **8色自動配色**: カテゴリ別の色分け表示

## 統計情報表示
- **総画像枚数**: フォルダ内の画像数
- **総アノテーション数**: 全画像のアノテーション総数
- **JSONファイル数**: 読み込み済みアノテーションファイル数
- **現在画像詳細**: 表示中画像のアノテーション一覧

## 対応フォーマット
- **画像**: JPG, JPEG, PNG, GIF, BMP, WebP, SVG
- **アノテーション**: COCO JSON format

# 操作

## 起動方法
1. **単一フォルダ**: フォルダを右クリック → "Open Annotation Viewer"
2. **複数ファイル選択**: 
   - imagesフォルダ + annotations.jsonを選択
   - 右クリック → "Open Annotation Viewer (Selected Files)"
3. **コマンドパレット**: Ctrl+Shift+P → "Annotation Viewer: Open Viewer"

### 制限事項
- JSONファイルは1つのみ選択可能
- 複数選択時はエラーメッセージを表示

## 操作方法

### マウス操作
- **クリック**: サムネイル→フルスクリーン表示
- **ドラッグ**: 
  - 縦方向: ズームイン/アウト
  - 横方向: パン（拡大時のみ）
- **ホイール**: ズーム操作
- **クリック外**: フルスクリーン終了

### キーボード操作
- **矢印キー**: 前/次の画像
- **スペース**: スライドショー再生/停止
- **ESC**: フルスクリーン終了

### フルスクリーンコントロール
- **ナビゲーション**: 前/次ボタン、スライダー
- **スライドショー**: 再生ボタン、速度選択、リピート切替
- **アノテーション**: On/Off切替ボタン

# 技術仕様

## アノテーション処理
- **ファイル解析**: COCOフォーマットのJSON解析
- **画像マッチング**: `file_name`フィールドによる関連付け
- **座標変換**: 画像サイズに応じた座標スケーリング
- **ズーム同期**: 中心基準でのズーム・パン連動

## ズーム・パン機能
- **ズーム範囲**: 0.1倍〜5倍
- **ズーム支点**: 画像中心
- **パン制限**: ズーム時のみ有効
- **座標同期**: アノテーションと画像の完全同期

## デフォルト設定
- **リピート**: ON
- **再生速度**: 0.1秒
- **アノテーション**: ON

# データ構造

## 対応JSONフォーマット（COCO）
```json
{
  "info": { "description": "Dataset info" },
  "images": [
    {
      "id": 1,
      "file_name": "000000001.jpg",
      "width": 640,
      "height": 480
    }
  ],
  "annotations": [
    {
      "id": 1,
      "image_id": 1,
      "category_id": 1,
      "bbox": [x, y, width, height],
      "area": 12000,
      "iscrowd": 0
    }
  ],
  "categories": [
    {
      "id": 1,
      "name": "person",
      "supercategory": "human"
    }
  ]
}
```

## ディレクトリ構造例
```
project/
├── images/
│   ├── 000000001.jpg
│   ├── 000000002.jpg
│   └── ...
└── annotations.json
```


